@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

/* ===== Paleta corporativa SIMA ===== */
:root{
  --brand-50:#ECFAFF;
  --brand-100:#D5F2FE;
  --brand-200:#AEE7FD;
  --brand-300:#7DD9FA;
  --brand-400:#4EC7F1;
  --brand-500:#2BB9E6; /* azul SIMA base */
  --brand-600:#1299C8;
  --brand-700:#0B7AA3; /* botón primario */
  --brand-800:#0A5F80; /* hover primario */
  --brand-900:#083E52; /* overlay */

  --graphite:#4A4F57; /* montaña del logo */
  --ink:#33363A;      /* texto principal */

  --slate-300:#CBD5E1;
  --slate-100:#F1F5F9;
  --ice:#E6EAEE;

  /* ===== Tokens del tema usados por shadcn/ui ===== */
  --radius:0.625rem;

  --background:white;
  --foreground:var(--ink);

  --card:white;
  --card-foreground:var(--ink);

  --popover:white;
  --popover-foreground:var(--ink);

  --primary:var(--brand-700);
  --primary-foreground:white;

  --secondary:color-mix(in srgb, var(--brand-700) 8%, white);
  --secondary-foreground:var(--ink);

  --muted:color-mix(in srgb, var(--brand-700) 6%, white);
  --muted-foreground:color-mix(in srgb, var(--ink) 70%, white);

  --accent:var(--brand-600);
  --accent-foreground:white;

  --destructive:oklch(0.577 0.245 27.325);

  --border:var(--slate-300);
  --input:var(--slate-300);
  --ring:var(--brand-600);

  /* Charts (placeholders) */
  --chart-1:oklch(0.646 0.222 41.116);
  --chart-2:oklch(0.6 0.118 184.704);
  --chart-3:oklch(0.398 0.07 227.392);
  --chart-4:oklch(0.828 0.189 84.429);
  --chart-5:oklch(0.769 0.188 70.08);

  --sidebar:white;
  --sidebar-foreground:var(--ink);
  --sidebar-primary:var(--brand-700);
  --sidebar-primary-foreground:white;
  --sidebar-accent:color-mix(in srgb, var(--brand-700) 8%, white);
  --sidebar-accent-foreground:var(--ink);
  --sidebar-border:var(--slate-300);
  --sidebar-ring:var(--brand-600);
}

/* ===== Dark mode ===== */
.dark {
  --background:#0F1113;
  --foreground:#F7F9FB;

  --card:#15181B;
  --card-foreground:#F7F9FB;

  --popover:#15181B;
  --popover-foreground:#F7F9FB;

  --primary:var(--brand-500);
  --primary-foreground:#041017;

  --secondary:#1C2227;
  --secondary-foreground:#E8EEF2;

  --muted:#1A2025;
  --muted-foreground:#B8C2CC;

  --accent:var(--brand-600);
  --accent-foreground:#041017;

  --destructive:oklch(0.704 0.191 22.216);

  --border:color-mix(in srgb, white 8%, transparent);
  --input:color-mix(in srgb, white 12%, transparent);
  --ring:var(--brand-500);

  --sidebar:#121519;
  --sidebar-foreground:#F7F9FB;
  --sidebar-primary:var(--brand-500);
  --sidebar-primary-foreground:#041017;
  --sidebar-accent:#1A2025;
  --sidebar-accent-foreground:#E8EEF2;
  --sidebar-border:color-mix(in srgb, white 8%, transparent);
  --sidebar-ring:var(--brand-500);
}

/* ===== Utilities Tailwind v4 para helpers de color ===== */
@utility text-brand     { color: var(--brand-700); }
@utility text-ink       { color: var(--ink); }
@utility text-graphite  { color: var(--graphite); }

/* Si quieres también bg helpers como utilidades: */
@utility bg-brand       { background-color: var(--brand-600); }
@utility bg-brand-700   { background-color: var(--brand-700); }
@utility bg-graphite    { background-color: var(--graphite); }
/* bg-sima-soft la dejamos como clase normal porque no se usa con @apply */

/* ===== Clases personalizadas (no usar con @apply) ===== */
.bg-sima-soft { background-color: color-mix(in srgb, var(--brand-700) 12%, white); }
.border-slate-300 { border-color: var(--slate-300); }

/* Botones (clases reutilizables; NO usarlas dentro de @apply) */
.btn-primary {
  @apply inline-flex items-center justify-center rounded-xl px-5 py-3 font-semibold text-white shadow transition-colors;
  background-color: var(--brand-700);
}
.btn-primary:hover { background-color: var(--brand-800); }

.btn-outline {
  @apply inline-flex items-center justify-center rounded-xl px-5 py-3 font-semibold border transition-colors;
  border-color: var(--brand-700);
  color: var(--brand-700);
}
.btn-outline:hover { background-color: color-mix(in hsl, var(--brand-700) 12%, white); }

/* Chips */
.chip       { @apply px-3 py-1 rounded-full text-sm font-medium; }
.chip-brand { background-color: color-mix(in srgb, var(--brand-700) 12%, white); color: var(--brand-700); }

/* Hero helpers */
.hero-overlay { background-color: color-mix(in srgb, var(--brand-900) 70%, transparent); }
.hero-title   { letter-spacing:-0.01em }
.hero-shadow  { text-shadow:0 2px 16px rgba(0,0,0,.35) }
.hero-bar     { background-color: color-mix(in srgb, var(--graphite) 70%, transparent); border-top: 1px solid rgb(255 255 255 / 0.1); backdrop-filter: blur(4px); }

/* Global */
:root{ color-scheme: light }
html{ scroll-behavior: smooth }
body{ color: var(--ink); background: white }

/* Tailwind theme mapping */
@theme inline {
  --radius-sm:calc(var(--radius) - 4px);
  --radius-md:calc(var(--radius) - 2px);
  --radius-lg:var(--radius);
  --radius-xl:calc(var(--radius) + 4px);

  --color-background:var(--background);
  --color-foreground:var(--foreground);
  --color-card:var(--card);
  --color-card-foreground:var(--card-foreground);
  --color-popover:var(--popover);
  --color-popover-foreground:var(--popover-foreground);
  --color-primary:var(--primary);
  --color-primary-foreground:var(--primary-foreground);
  --color-secondary:var(--secondary);
  --color-secondary-foreground:var(--secondary-foreground);
  --color-muted:var(--muted);
  --color-muted-foreground:var(--muted-foreground);
  --color-accent:var(--accent);
  --color-accent-foreground:var(--accent-foreground);
  --color-destructive:var(--destructive);
  --color-border:var(--border);
  --color-input:var(--input);
  --color-ring:var(--ring);
  --color-chart-1:var(--chart-1);
  --color-chart-2:var(--chart-2);
  --color-chart-3:var(--chart-3);
  --color-chart-4:var(--chart-4);
  --color-chart-5:var(--chart-5);
  --color-sidebar:var(--sidebar);
  --color-sidebar-foreground:var(--sidebar-foreground);
  --color-sidebar-primary:var(--sidebar-primary);
  --color-sidebar-primary-foreground:var(--sidebar-primary-foreground);
  --color-sidebar-accent:var(--sidebar-accent);
  --color-sidebar-accent-foreground:var(--sidebar-accent-foreground);
  --color-sidebar-border:var(--sidebar-border);
  --color-sidebar-ring:var(--sidebar-ring);
}

@layer base {
  * { @apply border-border outline-ring/50; }
  body { @apply bg-background text-foreground; }
}

/* ===== Services grid & cards ===== */
.services-grid {
  @apply grid gap-6 sm:gap-8;
  grid-template-columns: repeat(1, minmax(0,1fr));
}
@media (min-width: 640px){ .services-grid{ grid-template-columns: repeat(2,minmax(0,1fr)); } }
@media (min-width: 1024px){ .services-grid{ grid-template-columns: repeat(3,minmax(0,1fr)); } }

.service-card {
  @apply relative overflow-hidden rounded-2xl border shadow-sm transition-all;
  background: var(--card);
  color: var(--card-foreground);
  border-color: var(--border);
}
.service-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 28px rgba(0,0,0,.08);
}

.service-media {
  @apply block aspect-[16/10] w-full overflow-hidden;
  background-color: color-mix(in srgb, var(--brand-700) 12%, white); /* antes: bg-sima-soft */
}
.service-media img {
  @apply h-full w-full object-cover transition-transform duration-300;
}
.service-card:hover .service-media img { transform: scale(1.04); }

.service-body { @apply p-5 md:p-6; }
.service-title { @apply text-lg md:text-xl font-semibold tracking-tight; color: var(--foreground); }
.service-desc  { @apply mt-2 text-sm leading-relaxed; color: var(--muted-foreground); }

.service-meta { @apply mt-4 flex flex-wrap items-center gap-2; }
.service-chip{
  @apply px-3 py-1 rounded-full text-sm font-medium;
  background-color: color-mix(in srgb, var(--brand-700) 10%, white);
  color: var(--brand-700);
}
.dark .service-chip{
  background-color: color-mix(in srgb, var(--brand-500) 22%, #0F1113);
  color: var(--primary);
}

.service-footer {
  @apply mt-5 flex items-center justify-between pt-4;
  border-top: 1px solid var(--border);
}

/* EXPANSIÓN de btn-outline en service-cta (evita errores de apply) */
.service-cta{
  @apply inline-flex items-center justify-center rounded-xl px-5 py-3 font-semibold border transition-colors text-sm;
  border-color: var(--brand-700);
  color: var(--brand-700);
}
.service-cta:hover{
  background-color: color-mix(in hsl, var(--brand-700) 12%, white);
}

/* Destacados */
.service-featured {
  outline: 2px solid color-mix(in srgb, var(--brand-600) 35%, transparent);
  box-shadow: 0 8px 28px color-mix(in srgb, var(--brand-600) 18%, transparent);
}

/* ===== Service detail (página individual) ===== */
.service-article {
  @apply rounded-2xl border bg-card text-card-foreground shadow-sm;
  border-color: var(--border);
}

/* Imagen hero */
.service-hero { @apply overflow-hidden rounded-t-2xl; }
.service-hero img { @apply w-full h-64 md:h-80 object-cover; }

/* Header */
.service-header { @apply p-6 md:p-8; }
/* Ahora sí es válido usar text-brand porque lo definimos como @utility */
.service-kicker { @apply text-sm font-semibold uppercase tracking-wide text-brand; }
.service-title  { @apply mt-1 text-2xl md:text-3xl font-bold tracking-tight; }
.service-subtitle { @apply mt-2 text-muted-foreground; }

/* ===== Markdown map (contenido dentro del .md) ===== */
.service-content { @apply p-6 md:p-8; }

/* Encabezados */
.service-content h2 { @apply mt-6 text-xl md:text-2xl font-semibold; color: var(--foreground); }
.service-content h3 { @apply mt-5 text-lg md:text-xl font-semibold; color: var(--foreground); }

/* Párrafos y listas */
.service-content p  { @apply mt-3 leading-relaxed; color: var(--muted-foreground); }
.service-content ul { @apply mt-4 list-disc pl-6 space-y-1; color: var(--muted-foreground); }
.service-content ol { @apply mt-4 list-decimal pl-6 space-y-1; color: var(--muted-foreground); }

/* Énfasis y enlaces */
.service-content strong { color: var(--foreground); }
.service-content a { color: var(--brand-700); text-decoration: underline; }
.dark .service-content a { color: var(--primary); }

/* Bloques de código */
.service-content pre {
  @apply mt-4 rounded-xl p-4 overflow-x-auto text-sm;
  background: color-mix(in srgb, var(--brand-700) 8%, #0f1113);
  color: var(--foreground);
  border: 1px solid var(--border);
}
.service-content code { @apply px-1 py-0.5 rounded; background: color-mix(in srgb, var(--brand-700) 6%, white); }

/* Citas */
.service-content blockquote {
  @apply mt-4 border-l-4 pl-4 italic;
  border-color: var(--brand-600);
  color: color-mix(in srgb, var(--foreground) 80%, white);
}

/* Tablas */
.service-content table { @apply mt-4 w-full text-sm; border-collapse: separate; border-spacing: 0; }
.service-content th, .service-content td { @apply border px-3 py-2; border-color: var(--border); }
.service-content th { @apply font-semibold; background: color-mix(in srgb, var(--brand-700) 8%, white); }

/* Separador */
.service-content hr { @apply my-8 border-t; border-color: var(--border); }
